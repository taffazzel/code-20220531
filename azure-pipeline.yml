# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml


trigger:
- master

pool:
  vmImage: 'ubuntu-latest'


jobs:
- job: Unit_Test

  steps:
  - script: python test/Calculation_Test.py

- job: S3_Upload
  dependsOn: Unit_Test
  condition: succeeded()
  steps:
  - task: S3Upload@1
    inputs:
      awsCredentials: 'XXX'
      regionName: 'eu-west-1'
      bucketName: 'XXX'
      sourceFolder: 'src/'
      globExpressions: 'bmi_cal.py'